// Generated by CoffeeScript 1.6.3
(function() {
  var socket;

  console.log("fire main.js");

  socket = io.connect();

  $(function() {
    console.log('fire jQ');
    socket.on('connect', function() {
      socket.on('yumKeyUpData', function(data) {
        var item, matched, _i, _len, _results;
        console.log(data.matches);
        matched = data.matches;
        console.log(matched);
        if (matched) {
          _results = [];
          for (_i = 0, _len = matched.length; _i < _len; _i++) {
            item = matched[_i];
            console.log(item.recipeName);
            _results.push($('.collectionDiv').append("<option value=" + item.recipeName + ">" + item.recipeName + "</option>"));
          }
          return _results;
        }
      });
      return console.log("socket connected to yummly");
    });
    $(document).on('keyup', '.chosen-search input', function(e) {
      var dataToYummly, val;
      e.preventDefault();
      val = $(this).val();
      if (val.length <= 5 || 8 <= val.length) {
        return;
      }
      dataToYummly = {};
      dataToYummly.q = val;
      console.log("dataToYummly:", dataToYummly);
      console.log(val);
      return socket.emit('yumKeyUp', dataToYummly);
    });
    $(".chzn-select").chosen();
    return $('#recipe-form').on('change', function(e) {
      var info;
      e.preventDefault();
      info = $(this).serialize();
      console.log("info", info);
      return socket.emit('yumForm', info);
    });
  });

}).call(this);
