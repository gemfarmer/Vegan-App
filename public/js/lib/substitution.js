// Generated by CoffeeScript 1.6.3
(function() {
  var socket;

  socket = io.connect();

  $(function() {
    $('#substitute-params').hide();
    return socket.on('connect', function() {
      socket.on('rendersubs', function(data) {
        var objFromDataBase;
        objFromDataBase = data;
        return console.log(objFromDataBase);
      });
      $('#substitution-form').on('click', '.substitution-submit', function(e) {
        var formData;
        console.log();
        e.preventDefault();
        formData = $(this).serialize();
        console.log("formData", formData);
        return $('#substitute-results').append('<li class="substitute-results">Hi</li>');
      });
      return $('#substitution-form').on('change', function(e) {
        var val;
        e.preventDefault();
        val = $(this).serialize();
        console.log("val", val);
        socket.emit('requestparams', val);
        $('#substitute-params').show();
        return socket.on('sendparams', function(data) {
          var item, _i, _len;
          console.log(data);
          for (_i = 0, _len = data.length; _i < _len; _i++) {
            item = data[_i];
            if (item['non-vegan-units'] || item['non-vegan-qty']) {
              $('#substitute-params #units').append("<option value=" + item['non-vegan-units'] + ">" + item['non-vegan-units'] + "</option>");
              $('#substitute-params #qty').append("<option value=" + item['non-vegan-qty'] + ">" + item['non-vegan-qty'] + "</option>");
            }
          }
          return $('.subs').trigger("chosen:updated");
        });
      });
    });
  });

}).call(this);
